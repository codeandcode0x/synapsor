# ci.yaml
version: v1    # 流水线版本
framework: go  # 技术框架，该项目使用的技术框架，Eg: go、java、cpp、cpp_go、go_java
orchestration:
  type: docker-compose-and-kubernetes  # 服务编排类型，目前可选docker-compose、kubernetes和docker-compose-and-kubernetes
buildParameters:
  buildFrom: "dockerfile" # 构建类型：dockerfile、jib、none（必须）
  compileOption: ""
  packageType: "service"
  modules: "" 
  registryGroup: "ivc"
  ignoreFiles: ""  
  aliasRepoName: ""
unitTest:
  cmd: "sh -c 'go env -w GOPRIVATE=code.in.wezhuiyi.com && go test ./test -coverprofile=cov.out service-sonar && pwd && ls -al'"
  image: "registry01.wezhuiyi.com/library/golang:1.17"
  workdir: "/opt/app/synapsor"
  envs:
    - GOPROXY: http://pkg.in.wezhuiyi.com/repository/golang/,direct
    - GOPRIVATE: code.in.wezhuiyi.com
    - GOSUMDB: 'off'
    - GO111MODULE: 'on'
    - GOPATH: "/tmp/go"
    - XDG_CACHE_HOME: "/tmp/.cache"
  volumes:
    - $PWD: /opt/app/synapsor
